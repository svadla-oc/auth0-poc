{"version":3,"sources":["meteor://ðŸ’»app/packages/kadira:dochead/lib/both.js"],"names":[],"mappings":"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","file":"/packages/kadira_dochead.js","sourcesContent":["var FlowRouter = null;\nif (Package['kadira:flow-router-ssr']) {\n  FlowRouter = Package['kadira:flow-router-ssr'].FlowRouter;\n}\n\nif (Meteor.isClient) {\n  var titleDependency = new Tracker.Dependency();\n}\n\nDocHead = {\n  currentTitle: null,\n  setTitle(title) {\n    if (Meteor.isClient) {\n      titleDependency.changed();\n      document.title = title;\n    } else {\n      this.currentTitle = title;\n      const titleHtml = `<title>${title}</title>`;\n      this._addToHead(titleHtml);\n    }\n  },\n  addMeta(info) {\n    this._addTag(info, 'meta');\n  },\n  addLink(info) {\n    this._addTag(info, 'link');\n  },\n  getTitle() {\n    if (Meteor.isClient) {\n      titleDependency.depend();\n      return document.title;\n    }\n    return this.currentTitle;\n  },\n  addLdJsonScript(jsonObj) {\n    const strObj = JSON.stringify(jsonObj);\n    this._addLdJsonScript(strObj);\n  },\n  loadScript(url, options, callback) {\n    if (Meteor.isClient) {\n      npmLoadScript(url, options, callback);\n    }\n  },\n  _addTag(info, tag) {\n    const meta = this._buildTag(info, tag);\n    if (Meteor.isClient) {\n      document.getElementsByTagName('head')[0].insertAdjacentHTML('beforeend', meta);\n    } else {\n      this._addToHead(meta);\n    }\n  },\n  _addToHead(html) {\n    // only work there is kadira:flow-router-ssr\n    if (!FlowRouter) {\n      return;\n    }\n    let ssrContext = FlowRouter.ssrContext.get();\n    if (ssrContext) {\n      ssrContext.addToHead(html);\n    }\n  },\n  _buildTag(metaInfo, type) {\n    let props = \"\";\n    for (let key in metaInfo) {\n      props += `${key}=\"${metaInfo[key]}\" `;\n    }\n    props += 'dochead=\"1\"';\n    var meta = `<${type} ${props}/>`;\n    return meta;\n  },\n  _addLdJsonScript(stringifiedObject) {\n    const scriptTag = `<script type=\"application/ld+json\" dochead=\"1\">${stringifiedObject}</script>`;\n    if (Meteor.isClient) {\n      document.getElementsByTagName('head')[0].insertAdjacentHTML('beforeend', scriptTag);\n    } else {\n      this._addToHead(scriptTag);\n    }\n  },\n  removeDocHeadAddedTags() {\n    if (Meteor.isClient) {\n      const elements = document.querySelectorAll('[dochead=\"1\"]');\n      // We use for-of here to loop only over iterable objects\n      for (let element of elements) {\n        element.parentNode.removeChild(element);\n      }\n    }\n  }\n};\n"]}